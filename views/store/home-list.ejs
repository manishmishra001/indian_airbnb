<%- include('../partials/head') %>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-800 min-h-screen">
  <%- include('../partials/nav') %>
  <main class="container mx-auto mt-20 p-8 font-inter">
    <h2 class="text-4xl text-white font-bold text-center mb-10">
      Explore All Homes
    </h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
      <% registeredHomes.forEach(home => { %>
        <div class="bg-gray-900 rounded-xl shadow-xl overflow-hidden hover:shadow-2xl transition duration-300 transform hover:scale-105">
          <img src="<%= home.photo %>" alt="<%= home.houseName %>" class="w-full h-56 object-cover">
          <div class="p-6 flex flex-col justify-between">
            <div>
              <h3 class="text-2xl font-semibold text-white mb-2"><%= home.houseName %></h3>
              <p class="text-gray-400 mb-4 flex items-center">
                <i class="fas fa-map-marker-alt mr-2 text-purple-400"></i>
                <%= home.location %>
              </p>
            </div>
            <div class="mt-auto">
              <div class="flex justify-between items-center mb-4">
                <span class="text-xl font-bold text-purple-400">Rs<%= home.price %> / night</span>
                <div class="flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 text-yellow-400 mr-1">
                    <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd" />
                  </svg>
                  <span class="text-gray-300 font-semibold text-lg"><%= home.rating %></span>
                </div>
              </div>
              <div class="flex space-x-4">
                <a class="w-1/2 text-center bg-purple-600 text-white py-3 rounded-lg font-bold hover:bg-purple-700 transition duration-300" href="/homes/<%= home._id %>">Details</a>
                <div class=" w-1/2 rounded-lg flex justify-center items-center border border-gray-700 hover:border-purple-600 transition duration-300 cursor-pointer bg-green-300 p-2 hover:bg-green-500">
                    <%- include('../partials/favourite', {home: home}) %>
                </div>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    </div>

    <% if (registeredHomes.length === 0) { %>
      <div class="mt-16 p-8 bg-gray-900 border border-gray-700 rounded-lg shadow-xl max-w-xl mx-auto text-center">
          <p class="text-gray-300 text-lg mb-4">No homes are registered yet.</p>
          <a href="/register" class="inline-block bg-purple-600 text-white py-3 px-8 rounded-lg font-bold hover:bg-purple-700 transition duration-300">
              Register a Home
          </a>
      </div>
    <% } %>
  </main>
</body>
</html>